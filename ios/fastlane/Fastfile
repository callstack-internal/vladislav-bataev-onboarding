default_platform(:ios)

platform :ios do
  desc "Build iOS Release app"
  lane :e2e_tests do
    sh("npm install")

    cocoapods

    gym(
      workspace: "weatherApp.xcworkspace",
      scheme: "weatherApp",
      configuration: "Release",
      skip_package_ipa: true,
      destination: "generic/platform=iOS Simulator",
      skip_codesigning: true,
      derived_data_path: "ios/build",
      output_directory: "ios/build/Build/Products/Release-iphonesimulator",
      output_name: "weatherApp.app"
    )

  end
end
